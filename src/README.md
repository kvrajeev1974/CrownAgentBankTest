
This program exposes an API to process payment requests which makes use of a simulated mobile-money payment service. 

Input 
------
a CSV file with details of payments to make.

The input has the following columns:
1. `ID`: Unique ID of the payment.
2. `Recipient`: Phone number of the payment's recipient.
3. `Amount`: Payment amount.
4. `Currency`: Payment currency.

Output
------
a CSV file with the results of processing those payment requests through the test provider.

The output file should have the following columns:

1. `ID`: Unique ID of the payment from the input file.
2. `Server-generated ID`: Payment ID generated by the service, if available. Empty otherwise.
3. `Status`: "Succeeded" or "Failed" or "Unknown".
4. `Fee`: Fee amount, if successful. Empty otherwise.
5. `Details`: Additional human-readable details, if any.
   Your choice what to put here; we won't expect a specific format.

For example, an input file might look like

    ID,Recipient,Amount,Currency
    aaaaaaaa,254999999999,10,KES
    bbbbbbbb,12125551000,50,USD
    xyz12345,12125551005,150.35,USD
    29387431,12125550000,37,NGN

and the corresponding output might look like

    ID,Server-generated ID,Status,Fee,Details
    aaaaaaaa,XXXXXXXXXX,Succeeded,0.1,Succeeded with fee of 0.10
    bbbbbbbb,,Unknown,,Server was unable to process the request
    29387431,,Failed,,Recipient phone number invalid
    xyz12345,YYYYYYYYYY,Succeeded,5.43,Succeeded with fee of 5.43

# Tests 
* Unit test class is 'CABPaymentControllerTest' which uses JUnit5 and Mockito.
* Integration test class is 'CABPaymentIT' and uses SpringBootTest and Awaitility for testing async calls.

# CrownAgentBankApplication is the SpringBootApp entry point class that exposes an API to process payment requests.

# How to run the application
* java -jar CrownAgentBankTest-1.0-SNAPSHOT.jar

# How to access the endpoint to process payment requests using csv file
* curl -v -k http://localhost:8080/api/pay -X POST -F  file=@C:\Users\kvraj\IdeaProjects\CrownAgentBankTest\src\test\resources\sample-input.csv
  * Output
    - Payment file processed successfully.
    - Job IDs
    - ["e7fab2be-0b04-48c3-8d1a-47ef154e72c7","3cc894b4-5aa2-42ea-aa5a-96351225b458","a626421f-5519-4162-9696-8264efeb7a7a"]

# How to check the status of the payment request submitted using the jobid 
 
* curl -v -k http://localhost:8080/api/status/e7fab2be-0b04-48c3-8d1a-47ef154e72c7 -X GET
  * Output
    * {
       "jobId":"e7fab2be-0b04-48c3-8d1a-47ef154e72c7",
       "response":{"conversationID":"745954632","serverId":null,"status":"0","fee":0,"message":null,"timestamp":"2023-05-31T13:27:37.696974300","reference":null,"customerReference":null},
       "requestStatus":"COMPLETE"
      }

* curl -v -k http://localhost:8080/api/status/3cc894b4-5aa2-42ea-aa5a-96351225b458 -X GET
  * Output
    * {
     "jobId":"3cc894b4-5aa2-42ea-aa5a-96351225b458",
     "response":{"conversationID":null,"serverId":null,"status":"20000","fee":0,"message":"RECIPIENT_PHONE_INVALID","timestamp":"2023-05-31T13:28:05.419184800","reference":null,"customerReference":null},
     "requestStatus":"COMPLETE"
    }


